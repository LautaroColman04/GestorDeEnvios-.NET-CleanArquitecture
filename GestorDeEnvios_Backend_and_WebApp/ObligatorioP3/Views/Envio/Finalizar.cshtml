@model ObligatorioP3.Models.ModelsEnvio.FinalizarEnvioViewModel

@{
    ViewData["Title"] = "Confirmar Finalización";
}

<section class="min-h-screen bg-red-50 px-4 py-16">
    <div class="max-w-2xl mx-auto bg-white p-8 rounded-xl shadow-md">
        <h1 class="text-2xl font-bold text-red-700 mb-4 text-center">⚠️ Finalizar Envío</h1>
        <p class="text-gray-700 text-center text-sm mb-8">¿Estás seguro que querés finalizar este envío? Esta acción actualizará el estado a <strong>Finalizado</strong> y ya no se podran agregar seguimientos.</p>

        <div class="space-y-4 text-sm text-gray-800">
            <div><strong>ID:</strong> @Model.dtoEnvio.Id</div>
            <div><strong>Tipo:</strong> @Model.dtoEnvio.TipoEnvio</div>
            <div><strong>Tracking:</strong> @Model.dtoEnvio.NumTracking</div>
            <div><strong>Empleado ID:</strong> @Model.dtoEnvio.EmpleadoId</div>
            <div><strong>Cliente ID:</strong> @Model.dtoEnvio.ClienteId</div>

            @if (Model.dtoEnvio.TipoEnvio == "URGENTE")
            {
                <div><strong>Dirección:</strong> @Model.dtoEnvio.DireccionPostal</div>
            }
            else if (Model.dtoEnvio.TipoEnvio == "COMUN")
            {
                <div><strong>Agencia ID:</strong> @Model.dtoEnvio.AgenciaId</div>
                <div><strong>Dirección:</strong> @Model.dtoEnvio.DireccionPostal</div>
            }

            <div><strong>Peso:</strong> @Model.dtoEnvio.Peso</div>
            <div><strong>Estado actual:</strong> @Model.dtoEnvio.Estado</div>
            <div><strong>Creación:</strong> @Model.dtoEnvio.FechaCreacion?.ToShortDateString()</div>
        </div>

        <!-- Botones -->
        <form asp-action="Finalizar" method="post" class="mt-8 flex flex-wrap justify-center gap-4">
            <input type="hidden" name="origen" value="@Model.Origen" />

            <input type="submit" value="Finalizar Envío"
                   class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-md shadow transition font-semibold" />

            <a asp-action="@Model.Origen"
               class="bg-gray-700 hover:bg-gray-800 text-white px-6 py-2 rounded-md shadow transition font-semibold">
                Cancelar
            </a>
        </form>

        <!-- Mensaje -->
        @if (!string.IsNullOrEmpty(ViewBag.msg as string))
        {
            <div class="mt-6 text-green-600 text-center font-medium">
                @ViewBag.msg
            </div>
        }
    </div>
</section>